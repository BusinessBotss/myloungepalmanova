<!doctype html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>My Lounge Palmanova — Menú Premium</title>
    <meta name="description" content="Descubre nuestra exquisita selección de shisha premium, cócteles signature y gastronomía gourmet en el corazón de Palmanova, Mallorca.">
    <link rel="icon" type="image/png" sizes="64x64" href="https://res.cloudinary.com/dxhef6dju/image/upload/w_64,h_64,c_fill,f_auto,q_auto/v1756280156/371990834_._089_n_wvgbmd.jpg">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://res.cloudinary.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --cream: #faf8f5;
            --black: #1a1a1a;
            --gold: #d4af37;
            --white: #ffffff;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--cream);
            color: var(--black);
        }
        
        .font-playfair {
            font-family: 'Playfair Display', serif;
        }
        
        .text-gold {
            color: var(--gold);
        }
        
        .bg-gold {
            background-color: var(--gold);
        }
        
        .border-gold {
            border-color: var(--gold);
        }
        
        .ring-gold {
            --tw-ring-color: var(--gold);
        }
        
        .focus-visible:focus {
            outline: 2px solid var(--gold);
            outline-offset: 2px;
        }
        
        @keyframes shimmer {
            0% {
                background-position: -200px 0;
            }
            100% {
                background-position: calc(200px + 100%) 0;
            }
        }
        
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes bounce {
            0%, 20%, 53%, 80%, 100% {
                transform: translate3d(0,0,0);
            }
            40%, 43% {
                transform: translate3d(0,-8px,0);
            }
            70% {
                transform: translate3d(0,-4px,0);
            }
            90% {
                transform: translate3d(0,-2px,0);
            }
        }
        
        @keyframes heartParticle {
            0% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateY(-30px) scale(0.5);
            }
        }
        
        .animate-slideInUp {
            animation: slideInUp 0.3s ease-out;
        }
        
        .animate-bounce {
            animation: bounce 0.6s ease-out;
        }
        
        .animate-heartParticle {
            animation: heartParticle 0.8s ease-out forwards;
        }
        
        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }
        
        .highlight {
            background-color: rgba(212, 175, 55, 0.3);
            padding: 1px 2px;
            border-radius: 2px;
        }
        
        .badge-popular {
            background-color: var(--black);
            color: var(--white);
        }
        
        .badge-new {
            background-color: rgba(212, 175, 55, 0.1);
            color: var(--black);
            border: 1px solid rgba(212, 175, 55, 0.3);
        }
        
        .badge-premium {
            background-color: rgba(212, 175, 55, 0.2);
            color: var(--black);
            border: 1px solid rgba(212, 175, 55, 0.6);
        }
        
        .badge-signature {
            background: linear-gradient(135deg, var(--gold), var(--white));
            color: var(--black);
        }
        
        .badge-exclusive {
            background-color: var(--black);
            color: var(--gold);
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        .toast {
            animation: slideInUp 0.3s ease-out;
        }
        
        @media (prefers-reduced-motion: reduce) {
            .animate-slideInUp,
            .animate-bounce,
            .animate-heartParticle,
            .card-hover,
            .toast {
                animation: none;
                transition: none;
            }
            
            .card-hover:hover {
                transform: none;
            }
        }
        
        .scroll-margin-top {
            scroll-margin-top: 5rem;
        }
        
        .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .swipe-container {
            touch-action: pan-y;
        }
        
        .filter-chip {
            transition: all 0.2s ease;
            min-height: 44px;
            min-width: 44px;
        }
        
        .favorite-btn {
            min-height: 44px;
            min-width: 44px;
            transition: transform 0.2s ease;
        }
        
        .favorite-btn:hover {
            transform: scale(1.1);
        }
        
        .pwa-prompt {
            position: fixed;
            bottom: 1rem;
            right: 1rem;
            z-index: 50;
        }
        
        .analytics-opt-out {
            text-decoration: underline;
            cursor: pointer;
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- Header -->
    <header id="inicio" class="sticky top-0 z-40 bg-[#faf8f5]/95 backdrop-blur-sm border-b border-black/5 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <!-- Logo -->
                <div class="flex items-center space-x-3">
                    <img 
                        src="https://res.cloudinary.com/dxhef6dju/image/upload/w_128,h_128,c_fill,f_auto,q_auto/v1756280156/371990834_._089_n_wvgbmd.jpg"
                        srcset="https://res.cloudinary.com/dxhef6dju/image/upload/w_128,h_128,c_fill,f_auto,q_auto/v1756280156/371990834_._089_n_wvgbmd.jpg 128w,
                                https://res.cloudinary.com/dxhef6dju/image/upload/w_256,h_256,c_fill,f_auto,q_auto/v1756280156/371990834_._089_n_wvgbmd.jpg 256w,
                                https://res.cloudinary.com/dxhef6dju/image/upload/w_384,h_384,c_fill,f_auto,q_auto/v1756280156/371990834_._089_n_wvgbmd.jpg 384w"
                        sizes="(max-width: 768px) 40px, 48px"
                        alt="My Lounge Palmanova — Logo"
                        class="w-10 h-10 rounded-full object-cover"
                        fetchpriority="high"
                        decoding="async"
                    >
                    <div>
                        <h1 class="font-playfair font-bold text-xl text-black">My Lounge</h1>
                        <p class="text-xs text-gray-600">Palmanova</p>
                    </div>
                </div>
                
                <!-- Desktop Navigation -->
                <div class="hidden md:flex items-center space-x-6">
                    <!-- Language Selector -->
                    <div class="relative" role="radiogroup" aria-label="Selector de idioma">
                        <button 
                            id="languageBtn" 
                            class="flex items-center space-x-2 px-3 py-2 rounded-lg hover:bg-black/5 transition-colors focus-visible min-h-[44px]"
                            aria-expanded="false"
                            aria-haspopup="true"
                        >
                            <span id="currentFlag" aria-hidden="true">🇪🇸</span>
                            <span id="currentLang" class="text-sm font-medium">ES</span>
                            <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div id="languageDropdown" class="absolute right-0 mt-2 w-48 bg-white rounded-2xl shadow-lg border border-black/5 hidden">
                            <div class="py-2">
                                <button class="lang-option w-full text-left px-4 py-2 hover:bg-black/5 flex items-center space-x-3 min-h-[44px] focus-visible" data-lang="es" role="radio" aria-checked="true">
                                    <span aria-hidden="true">🇪🇸</span>
                                    <span>Español</span>
                                </button>
                                <button class="lang-option w-full text-left px-4 py-2 hover:bg-black/5 flex items-center space-x-3 min-h-[44px] focus-visible" data-lang="en" role="radio" aria-checked="false">
                                    <span aria-hidden="true">🇬🇧</span>
                                    <span>English</span>
                                </button>
                                <button class="lang-option w-full text-left px-4 py-2 hover:bg-black/5 flex items-center space-x-3 min-h-[44px] focus-visible" data-lang="fr" role="radio" aria-checked="false">
                                    <span aria-hidden="true">🇫🇷</span>
                                    <span>Français</span>
                                </button>
                                <button class="lang-option w-full text-left px-4 py-2 hover:bg-black/5 flex items-center space-x-3 min-h-[44px] focus-visible" data-lang="de" role="radio" aria-checked="false">
                                    <span aria-hidden="true">🇩🇪</span>
                                    <span>Deutsch</span>
                                </button>
                                <button class="lang-option w-full text-left px-4 py-2 hover:bg-black/5 flex items-center space-x-3 min-h-[44px] focus-visible" data-lang="it" role="radio" aria-checked="false">
                                    <span aria-hidden="true">🇮🇹</span>
                                    <span>Italiano</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Refresh Button -->
                    <button id="refreshBtn" class="p-2 rounded-lg hover:bg-black/5 transition-colors focus-visible min-h-[44px] min-w-[44px]" title="Actualizar menú" aria-label="Actualizar menú">
                        <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                        </svg>
                    </button>
                </div>
                
                <!-- Mobile Menu Button -->
                <button id="mobileMenuBtn" class="md:hidden p-2 rounded-lg hover:bg-black/5 transition-colors focus-visible min-h-[44px] min-w-[44px]" aria-label="Abrir menú">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
            </div>
        </div>
        
        <!-- Mobile Menu -->
        <div id="mobileMenu" class="md:hidden fixed inset-y-0 left-0 w-64 bg-white shadow-xl z-50 transform -translate-x-full transition-transform duration-300">
            <div class="p-4 border-b border-black/5">
                <div class="flex items-center justify-between">
                    <h2 class="font-playfair font-bold text-lg">Menú</h2>
                    <button id="closeMobileMenu" class="p-2 rounded-lg hover:bg-black/5 min-h-[44px] min-w-[44px] focus-visible" aria-label="Cerrar menú">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="p-4 space-y-4">
                <div>
                    <h3 class="text-sm font-medium text-gray-700 mb-2" data-translate="language">Idioma</h3>
                    <div class="space-y-2" role="radiogroup" aria-label="Selector de idioma móvil">
                        <button class="lang-option w-full text-left px-3 py-2 rounded-lg hover:bg-black/5 flex items-center space-x-3 min-h-[44px] focus-visible" data-lang="es" role="radio" aria-checked="true">
                            <span aria-hidden="true">🇪🇸</span>
                            <span>Español</span>
                        </button>
                        <button class="lang-option w-full text-left px-3 py-2 rounded-lg hover:bg-black/5 flex items-center space-x-3 min-h-[44px] focus-visible" data-lang="en" role="radio" aria-checked="false">
                            <span aria-hidden="true">🇬🇧</span>
                            <span>English</span>
                        </button>
                        <button class="lang-option w-full text-left px-3 py-2 rounded-lg hover:bg-black/5 flex items-center space-x-3 min-h-[44px] focus-visible" data-lang="fr" role="radio" aria-checked="false">
                            <span aria-hidden="true">🇫🇷</span>
                            <span>Français</span>
                        </button>
                        <button class="lang-option w-full text-left px-3 py-2 rounded-lg hover:bg-black/5 flex items-center space-x-3 min-h-[44px] focus-visible" data-lang="de" role="radio" aria-checked="false">
                            <span aria-hidden="true">🇩🇪</span>
                            <span>Deutsch</span>
                        </button>
                        <button class="lang-option w-full text-left px-3 py-2 rounded-lg hover:bg-black/5 flex items-center space-x-3 min-h-[44px] focus-visible" data-lang="it" role="radio" aria-checked="false">
                            <span aria-hidden="true">🇮🇹</span>
                            <span>Italiano</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Mobile Menu Overlay -->
        <div id="mobileMenuOverlay" class="md:hidden fixed inset-0 bg-black/50 z-40 hidden"></div>
    </header>

    <!-- Hero Section -->
    <section class="bg-gradient-to-br from-[#faf8f5] to-white py-12 lg:py-20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h1 class="font-playfair text-4xl lg:text-6xl font-bold text-black mb-4 animate-slideInUp">
                <span data-translate="title">Menú Premium</span>
            </h1>
            <p class="text-lg lg:text-xl text-gray-600 mb-8 max-w-2xl mx-auto animate-slideInUp" style="animation-delay: 0.1s">
                <span data-translate="subtitle">Descubre nuestra exquisita selección de sabores únicos</span>
            </p>
            
            <!-- Search Bar -->
            <div class="max-w-md mx-auto mb-8 animate-slideInUp" style="animation-delay: 0.2s">
                <div class="relative">
                    <input 
                        type="text" 
                        id="searchInput" 
                        class="w-full px-4 py-3 pl-12 pr-4 rounded-full border border-gray-300 focus:ring-2 ring-gold focus:border-transparent outline-none transition-all"
                        data-translate-placeholder="search"
                        placeholder="Buscar en el menú..."
                        aria-label="Buscar en el menú"
                    >
                    <svg class="absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                    </svg>
                    <div id="searchSpinner" class="absolute right-4 top-1/2 transform -translate-y-1/2 hidden" aria-hidden="true">
                        <div class="w-5 h-5 border-2 border-[#d4af37] border-t-transparent rounded-full animate-spin"></div>
                    </div>
                </div>
                <div id="searchResults" class="mt-2 text-sm text-gray-600" role="status" aria-live="polite"></div>
            </div>
            
            <!-- Filter Chips -->
            <div class="swipe-container">
                <div class="flex flex-wrap justify-center gap-3 animate-slideInUp" style="animation-delay: 0.3s" role="radiogroup" aria-label="Filtros de categoría">
                    <button class="filter-chip active px-4 py-2 rounded-full bg-[#d4af37] text-white font-medium transition-all hover:bg-[#d4af37]/90 focus-visible" data-category="all" role="radio" aria-checked="true">
                        <span data-translate="all">Todo</span>
                    </button>
                    <button class="filter-chip px-4 py-2 rounded-full bg-white text-gray-700 border border-gray-300 font-medium transition-all hover:bg-[#d4af37] hover:text-white hover:border-[#d4af37] focus-visible" data-category="shisha" role="radio" aria-checked="false">
                        <span data-translate="shisha">Shisha Premium</span>
                    </button>
                    <button class="filter-chip px-4 py-2 rounded-full bg-white text-gray-700 border border-gray-300 font-medium transition-all hover:bg-[#d4af37] hover:text-white hover:border-[#d4af37] focus-visible" data-category="cocktails" role="radio" aria-checked="false">
                        <span data-translate="cocktails">Cócteles</span>
                    </button>
                    <button class="filter-chip px-4 py-2 rounded-full bg-white text-gray-700 border border-gray-300 font-medium transition-all hover:bg-[#d4af37] hover:text-white hover:border-[#d4af37] focus-visible" data-category="food" role="radio" aria-checked="false">
                        <span data-translate="food">Gastronomía</span>
                    </button>
                    <button class="filter-chip px-4 py-2 rounded-full bg-white text-gray-700 border border-gray-300 font-medium transition-all hover:bg-[#d4af37] hover:text-white hover:border-[#d4af37] focus-visible" data-category="desserts" role="radio" aria-checked="false">
                        <span data-translate="desserts">Postres</span>
                    </button>
                    <button class="filter-chip px-4 py-2 rounded-full bg-white text-gray-700 border border-gray-300 font-medium transition-all hover:bg-[#d4af37] hover:text-white hover:border-[#d4af37] focus-visible" data-category="drinks" role="radio" aria-checked="false">
                        <span data-translate="drinks">Bebidas</span>
                    </button>
                    <button class="filter-chip px-4 py-2 rounded-full bg-white text-gray-700 border border-gray-300 font-medium transition-all hover:bg-[#d4af37] hover:text-white hover:border-[#d4af37] focus-visible" data-category="coffee" role="radio" aria-checked="false">
                        <span data-translate="coffee">Cafés</span>
                    </button>
                    <button class="filter-chip px-4 py-2 rounded-full bg-white text-gray-700 border border-gray-300 font-medium transition-all hover:bg-[#d4af37] hover:text-white hover:border-[#d4af37] focus-visible" data-category="salads" role="radio" aria-checked="false">
                        <span data-translate="salads">Ensaladas</span>
                    </button>
                    <button class="filter-chip px-4 py-2 rounded-full bg-white text-gray-700 border border-gray-300 font-medium transition-all hover:bg-[#d4af37] hover:text-white hover:border-[#d4af37] focus-visible" data-category="pizzas" role="radio" aria-checked="false">
                        <span data-translate="pizzas">Pizzas</span>
                    </button>
                </div>
            </div>
            
            <!-- Advanced Filters -->
            <div id="advancedFilters" class="mt-6 max-w-4xl mx-auto">
                <div class="flex flex-wrap justify-center gap-4">
                    <!-- Price Range Filter -->
                    <div class="flex items-center space-x-2">
                        <label class="text-sm font-medium text-gray-700" data-translate="priceRange">Precio:</label>
                        <select id="priceFilter" class="px-3 py-1 rounded-lg border border-gray-300 text-sm focus:ring-2 ring-gold focus:border-transparent outline-none">
                            <option value="all" data-translate="allPrices">Todos</option>
                            <option value="economico" data-translate="economico">Económico (≤15€)</option>
                            <option value="medio" data-translate="medio">Medio (16-30€)</option>
                            <option value="premium" data-translate="premiumPrice">Premium (>30€)</option>
                        </select>
                    </div>
                    
                    <!-- Badge Filter -->
                    <div class="flex items-center space-x-2">
                        <label class="text-sm font-medium text-gray-700" data-translate="badges">Destacados:</label>
                        <select id="badgeFilter" class="px-3 py-1 rounded-lg border border-gray-300 text-sm focus:ring-2 ring-gold focus:border-transparent outline-none">
                            <option value="all" data-translate="allBadges">Todos</option>
                            <option value="popular" data-translate="popular">Popular</option>
                            <option value="new" data-translate="new">Nuevo</option>
                            <option value="premium" data-translate="premium">Premium</option>
                            <option value="signature" data-translate="signature">Signature</option>
                            <option value="exclusive" data-translate="exclusive">Exclusivo</option>
                        </select>
                    </div>
                    
                    <!-- Clear Filters -->
                    <button id="clearFilters" class="px-3 py-1 text-sm text-[#d4af37] hover:text-[#d4af37]/80 transition-colors focus-visible" data-translate="clearFilters">
                        Limpiar filtros
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <main id="menu" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 scroll-margin-top">
        <!-- Favorites Section -->
        <div id="favoritesSection" class="mb-12 hidden">
            <h2 class="font-playfair text-2xl font-bold text-black mb-6" data-translate="yourFavorites">Tus favoritos</h2>
            <div id="favoritesGrid" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-5 md:gap-6"></div>
        </div>
        
        <!-- Recommendations Section -->
        <div id="recommendationsSection" class="mb-12 hidden">
            <h2 class="font-playfair text-2xl font-bold text-black mb-6" data-translate="recommendedForYou">Recomendado para ti</h2>
            <div id="recommendationsGrid" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-5 md:gap-6"></div>
        </div>
        
        <!-- Loading State -->
        <div id="loadingState" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-5 md:gap-6">
            <div class="rounded-2xl bg-white shadow ring-1 ring-black/5 p-5 md:p-6">
                <div class="skeleton h-6 w-3/4 mb-4 rounded"></div>
                <div class="skeleton h-4 w-full mb-2 rounded"></div>
                <div class="skeleton h-4 w-2/3 mb-4 rounded"></div>
                <div class="skeleton h-8 w-20 rounded-full"></div>
            </div>
            <div class="rounded-2xl bg-white shadow ring-1 ring-black/5 p-5 md:p-6">
                <div class="skeleton h-6 w-3/4 mb-4 rounded"></div>
                <div class="skeleton h-4 w-full mb-2 rounded"></div>
                <div class="skeleton h-4 w-2/3 mb-4 rounded"></div>
                <div class="skeleton h-8 w-20 rounded-full"></div>
            </div>
            <div class="rounded-2xl bg-white shadow ring-1 ring-black/5 p-5 md:p-6">
                <div class="skeleton h-6 w-3/4 mb-4 rounded"></div>
                <div class="skeleton h-4 w-full mb-2 rounded"></div>
                <div class="skeleton h-4 w-2/3 mb-4 rounded"></div>
                <div class="skeleton h-8 w-20 rounded-full"></div>
            </div>
        </div>
        
        <!-- Menu Grid -->
        <div id="menuGrid" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-5 md:gap-6 hidden"></div>
        
        <!-- Empty State -->
        <div id="emptyState" class="text-center py-16 hidden">
            <div class="w-24 h-24 mx-auto mb-6 bg-gray-100 rounded-full flex items-center justify-center">
                <svg class="w-12 h-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                </svg>
            </div>
            <h3 class="text-xl font-semibold text-gray-700 mb-2" data-translate="noResults">Sin resultados</h3>
            <p class="text-gray-500 mb-4" data-translate="noResultsDesc">No encontramos productos que coincidan con tu búsqueda</p>
            <div class="space-y-2">
                <p class="text-sm text-gray-600" data-translate="tryAlternatives">Prueba con:</p>
                <div id="alternativeCategories" class="flex flex-wrap justify-center gap-2"></div>
            </div>
        </div>
    </main>

    <!-- Reservas Section -->
    <section id="reservas" class="bg-white py-16 scroll-margin-top">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h2 class="font-playfair text-3xl font-bold text-black mb-4" data-translate="reservations">Reservas</h2>
            <p class="text-lg text-gray-600 mb-8" data-translate="reservationsDesc">Reserva tu mesa y disfruta de una experiencia única</p>
            <div class="flex flex-col sm:flex-row justify-center gap-4">
                <a href="tel:+34604151613" class="inline-flex items-center px-6 py-3 bg-[#d4af37] text-white font-medium rounded-full hover:bg-[#d4af37]/90 transition-colors focus-visible">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                    </svg>
                    <span data-translate="callNow">Llamar ahora</span>
                </a>
                <a href="mailto:myloungepalma@gmail.com" class="inline-flex items-center px-6 py-3 bg-white text-[#d4af37] font-medium rounded-full border-2 border-[#d4af37] hover:bg-[#d4af37] hover:text-white transition-colors focus-visible">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                    </svg>
                    <span data-translate="sendEmail">Enviar email</span>
                </a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer id="contacto" class="bg-black text-white py-12 scroll-margin-top">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div>
                    <div class="flex items-center space-x-3 mb-4">
                        <img 
                            src="https://res.cloudinary.com/dxhef6dju/image/upload/w_128,h_128,c_fill,f_auto,q_auto/v1756280156/371990834_._089_n_wvgbmd.jpg"
                            alt="My Lounge Palmanova — Logo"
                            class="w-10 h-10 rounded-full object-cover"
                            decoding="async"
                        >
                        <div>
                            <h3 class="font-playfair font-bold text-xl">My Lounge</h3>
                            <p class="text-sm text-gray-400">Palmanova</p>
                        </div>
                    </div>
                    <p class="text-gray-300 text-sm mb-6" data-translate="footerDesc">
                        Experiencia premium en el corazón de Palmanova
                    </p>
                    
                    <div class="space-y-3">
                        <h4 class="font-semibold mb-3" data-translate="contact">Contacto</h4>
                        <div class="space-y-2 text-sm text-gray-300">
                            <p>📍 Palmanova, Mallorca</p>
                            <a href="tel:+34604151613" class="flex items-center hover:text-[#d4af37] transition-colors focus-visible">
                                📞 +34 604 151 613
                            </a>
                            <a href="mailto:myloungepalma@gmail.com" class="flex items-center hover:text-[#d4af37] transition-colors focus-visible">
                                ✉️ myloungepalma@gmail.com
                            </a>
                            <a href="https://www.instagram.com/mylounge.mallorca/" target="_blank" rel="noopener noreferrer" class="flex items-center hover:text-[#d4af37] transition-colors focus-visible">
                                📱 @mylounge.mallorca
                            </a>
                        </div>
                    </div>
                </div>
                
                <div>
                    <h4 class="font-semibold mb-4" data-translate="hours">Horarios</h4>
                    <div class="space-y-2 text-sm text-gray-300 mb-6">
                        <p data-translate="weekdays">Lun - Jue: 18:00 - 02:00</p>
                        <p data-translate="weekend">Vie - Sáb: 18:00 - 03:00</p>
                        <p data-translate="sunday">Dom: 18:00 - 01:00</p>
                    </div>
                    
                    <div class="space-y-3">
                        <h4 class="font-semibold" data-translate="quickLinks">Enlaces rápidos</h4>
                        <div class="space-y-2 text-sm">
                            <a href="#inicio" class="block hover:text-[#d4af37] transition-colors focus-visible" data-translate="home">Inicio</a>
                            <a href="#menu" class="block hover:text-[#d4af37] transition-colors focus-visible" data-translate="menu">Menú</a>
                            <a href="#reservas" class="block hover:text-[#d4af37] transition-colors focus-visible" data-translate="reservations">Reservas</a>
                            <a href="#legal" class="block hover:text-[#d4af37] transition-colors focus-visible" data-translate="privacy">Privacidad</a>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="border-t border-gray-800 mt-8 pt-8">
                <div class="flex flex-col md:flex-row justify-between items-center text-sm text-gray-400">
                    <p>&copy; 2024 My Lounge Palmanova. <span data-translate="rights">Todos los derechos reservados.</span></p>
                    <div class="mt-4 md:mt-0 flex items-center space-x-4">
                        <span class="analytics-opt-out" id="analyticsOptOut" data-translate="disableAnalytics">Desactivar seguimiento</span>
                        <span id="analyticsStatus" class="text-green-400" data-translate="analyticsEnabled">Analytics activo</span>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Legal Section -->
    <section id="legal" class="bg-[#faf8f5] py-12 scroll-margin-top hidden">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="font-playfair text-3xl font-bold text-black mb-8" data-translate="privacyPolicy">Política de Privacidad</h2>
            <div class="prose prose-gray max-w-none">
                <p data-translate="privacyIntro">
                    En My Lounge Palmanova respetamos tu privacidad. Esta aplicación recopila datos mínimos para mejorar tu experiencia.
                </p>
                <h3 data-translate="dataCollected">Datos que recopilamos:</h3>
                <ul>
                    <li data-translate="dataItem1">Preferencias de idioma (almacenadas localmente)</li>
                    <li data-translate="dataItem2">Elementos favoritos (almacenados localmente)</li>
                    <li data-translate="dataItem3">Estadísticas de uso anónimas (opcional)</li>
                </ul>
                <h3 data-translate="dataUsage">Uso de los datos:</h3>
                <p data-translate="dataUsageDesc">
                    Los datos se utilizan únicamente para personalizar tu experiencia y mejorar nuestros servicios. No compartimos información personal con terceros.
                </p>
                <h3 data-translate="yourRights">Tus derechos:</h3>
                <p data-translate="yourRightsDesc">
                    Puedes desactivar el seguimiento en cualquier momento usando el enlace en el pie de página. Los datos locales se pueden eliminar borrando los datos del navegador.
                </p>
            </div>
        </div>
    </section>

    <!-- PWA Install Prompt -->
    <div id="pwaPrompt" class="pwa-prompt bg-white rounded-2xl shadow-lg border border-black/5 p-4 hidden">
        <div class="flex items-center justify-between">
            <div class="flex items-center space-x-3">
                <div class="w-10 h-10 bg-[#d4af37] rounded-lg flex items-center justify-center">
                    <span class="text-white font-bold text-sm">ML</span>
                </div>
                <div>
                    <h4 class="font-semibold text-sm" data-translate="installApp">Instalar App</h4>
                    <p class="text-xs text-gray-600" data-translate="installDesc">Accede más rápido al menú</p>
                </div>
            </div>
            <div class="flex space-x-2">
                <button id="pwaInstall" class="px-3 py-1 bg-[#d4af37] text-white text-sm rounded-lg hover:bg-[#d4af37]/90 transition-colors focus-visible">
                    <span data-translate="install">Instalar</span>
                </button>
                <button id="pwaDismiss" class="px-3 py-1 text-gray-600 text-sm hover:bg-black/5 rounded-lg transition-colors focus-visible">
                    <span data-translate="dismiss">Cerrar</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toastContainer" class="fixed top-20 right-4 z-50 space-y-2"></div>

    <script>
        // Global State
        let currentLanguage = localStorage.getItem('myloungepalma_language') || 'es';
        let currentCategory = 'all';
        let currentPriceFilter = 'all';
        let currentBadgeFilter = 'all';
        let searchTerm = '';
        let favorites = JSON.parse(localStorage.getItem('myloungepalma_favorites') || '[]');
        let menuData = {};
        let filteredItems = [];
        let searchTimeout;
        let touchStartX = 0;
        let touchEndX = 0;
        let deferredPrompt;
        let analyticsEnabled = localStorage.getItem('myloungepalma_analytics') !== 'disabled';
        let sessionId = sessionStorage.getItem('myloungepalma_session') || 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        let analyticsEvents = [];
        let intersectionObserver;
        let searchCache = new Map();
        let renderCache = new Map();

        // Store session ID
        sessionStorage.setItem('myloungepalma_session', sessionId);

        // Translations
        const translations = {
            es: {
                title: 'Menú Premium',
                subtitle: 'Descubre nuestra exquisita selección de sabores únicos',
                search: 'Buscar en el menú...',
                all: 'Todo',
                shisha: 'Shisha Premium',
                cocktails: 'Cócteles Signature',
                food: 'Gastronomía Gourmet',
                desserts: 'Postres Premium',
                drinks: 'Bebidas Premium',
                coffee: 'Cafés & Infusiones',
                salads: 'Ensaladas Gourmet',
                pizzas: 'Pizzas Artesanales',
                noResults: 'Sin resultados',
                noResultsDesc: 'No encontramos productos que coincidan con tu búsqueda',
                tryAlternatives: 'Prueba con:',
                popular: 'Popular',
                new: 'Nuevo',
                premium: 'Premium',
                signature: 'Signature',
                exclusive: 'Exclusivo',
                contact: 'Contacto',
                hours: 'Horarios',
                weekdays: 'Lun - Jue: 18:00 - 02:00',
                weekend: 'Vie - Sáb: 18:00 - 03:00',
                sunday: 'Dom: 18:00 - 01:00',
                rights: 'Todos los derechos reservados.',
                footerDesc: 'Experiencia premium en el corazón de Palmanova',
                language: 'Idioma',
                installApp: 'Instalar App',
                installDesc: 'Accede más rápido al menú',
                install: 'Instalar',
                dismiss: 'Cerrar',
                online: 'Conectado',
                offline: 'Sin conexión — Modo offline',
                yourFavorites: 'Tus favoritos',
                recommendedForYou: 'Recomendado para ti',
                reservations: 'Reservas',
                reservationsDesc: 'Reserva tu mesa y disfruta de una experiencia única',
                callNow: 'Llamar ahora',
                sendEmail: 'Enviar email',
                quickLinks: 'Enlaces rápidos',
                home: 'Inicio',
                menu: 'Menú',
                privacy: 'Privacidad',
                privacyPolicy: 'Política de Privacidad',
                privacyIntro: 'En My Lounge Palmanova respetamos tu privacidad. Esta aplicación recopila datos mínimos para mejorar tu experiencia.',
                dataCollected: 'Datos que recopilamos:',
                dataItem1: 'Preferencias de idioma (almacenadas localmente)',
                dataItem2: 'Elementos favoritos (almacenados localmente)',
                dataItem3: 'Estadísticas de uso anónimas (opcional)',
                dataUsage: 'Uso de los datos:',
                dataUsageDesc: 'Los datos se utilizan únicamente para personalizar tu experiencia y mejorar nuestros servicios. No compartimos información personal con terceros.',
                yourRights: 'Tus derechos:',
                yourRightsDesc: 'Puedes desactivar el seguimiento en cualquier momento usando el enlace en el pie de página. Los datos locales se pueden eliminar borrando los datos del navegador.',
                disableAnalytics: 'Desactivar seguimiento',
                enableAnalytics: 'Activar seguimiento',
                analyticsEnabled: 'Analytics activo',
                analyticsDisabled: 'Analytics desactivado',
                priceRange: 'Precio:',
                allPrices: 'Todos',
                economico: 'Económico (≤15€)',
                medio: 'Medio (16-30€)',
                premiumPrice: 'Premium (>30€)',
                badges: 'Destacados:',
                allBadges: 'Todos',
                clearFilters: 'Limpiar filtros',
                resultsFound: 'resultados encontrados'
            },
            en: {
                title: 'Premium Menu',
                subtitle: 'Discover our exquisite selection of unique flavors',
                search: 'Search menu...',
                all: 'All',
                shisha: 'Premium Shisha',
                cocktails: 'Signature Cocktails',
                food: 'Gourmet Gastronomy',
                desserts: 'Premium Desserts',
                drinks: 'Premium Drinks',
                coffee: 'Coffees & Infusions',
                salads: 'Gourmet Salads',
                pizzas: 'Artisanal Pizzas',
                noResults: 'No results',
                noResultsDesc: 'We couldn\'t find products matching your search',
                tryAlternatives: 'Try:',
                popular: 'Popular',
                new: 'New',
                premium: 'Premium',
                signature: 'Signature',
                exclusive: 'Exclusive',
                contact: 'Contact',
                hours: 'Hours',
                weekdays: 'Mon - Thu: 6:00 PM - 2:00 AM',
                weekend: 'Fri - Sat: 6:00 PM - 3:00 AM',
                sunday: 'Sun: 6:00 PM - 1:00 AM',
                rights: 'All rights reserved.',
                footerDesc: 'Premium experience in the heart of Palmanova',
                language: 'Language',
                installApp: 'Install App',
                installDesc: 'Faster access to menu',
                install: 'Install',
                dismiss: 'Close',
                online: 'Online',
                offline: 'Offline mode',
                yourFavorites: 'Your favorites',
                recommendedForYou: 'Recommended for you',
                reservations: 'Reservations',
                reservationsDesc: 'Book your table and enjoy a unique experience',
                callNow: 'Call now',
                sendEmail: 'Send email',
                quickLinks: 'Quick links',
                home: 'Home',
                menu: 'Menu',
                privacy: 'Privacy',
                privacyPolicy: 'Privacy Policy',
                privacyIntro: 'At My Lounge Palmanova we respect your privacy. This application collects minimal data to improve your experience.',
                dataCollected: 'Data we collect:',
                dataItem1: 'Language preferences (stored locally)',
                dataItem2: 'Favorite items (stored locally)',
                dataItem3: 'Anonymous usage statistics (optional)',
                dataUsage: 'Data usage:',
                dataUsageDesc: 'Data is used solely to personalize your experience and improve our services. We do not share personal information with third parties.',
                yourRights: 'Your rights:',
                yourRightsDesc: 'You can disable tracking at any time using the link in the footer. Local data can be deleted by clearing browser data.',
                disableAnalytics: 'Disable tracking',
                enableAnalytics: 'Enable tracking',
                analyticsEnabled: 'Analytics active',
                analyticsDisabled: 'Analytics disabled',
                priceRange: 'Price:',
                allPrices: 'All',
                economico: 'Budget (≤15€)',
                medio: 'Medium (16-30€)',
                premiumPrice: 'Premium (>30€)',
                badges: 'Featured:',
                allBadges: 'All',
                clearFilters: 'Clear filters',
                resultsFound: 'results found'
            },
            fr: {
                title: 'Menu Premium',
                subtitle: 'Découvrez notre sélection exquise de saveurs uniques',
                search: 'Rechercher dans le menu...',
                all: 'Tout',
                shisha: 'Shisha Premium',
                cocktails: 'Cocktails Signature',
                food: 'Gastronomie Gourmet',
                desserts: 'Desserts Premium',
                drinks: 'Boissons Premium',
                coffee: 'Cafés & Infusions',
                salads: 'Salades Gourmet',
                pizzas: 'Pizzas Artisanales',
                noResults: 'Aucun résultat',
                noResultsDesc: 'Nous n\'avons trouvé aucun produit correspondant à votre recherche',
                tryAlternatives: 'Essayez:',
                popular: 'Populaire',
                new: 'Nouveau',
                premium: 'Premium',
                signature: 'Signature',
                exclusive: 'Exclusif',
                contact: 'Contact',
                hours: 'Horaires',
                weekdays: 'Lun - Jeu: 18h00 - 02h00',
                weekend: 'Ven - Sam: 18h00 - 03h00',
                sunday: 'Dim: 18h00 - 01h00',
                rights: 'Tous droits réservés.',
                footerDesc: 'Expérience premium au cœur de Palmanova',
                language: 'Langue',
                installApp: 'Installer l\'App',
                installDesc: 'Accès plus rapide au menu',
                install: 'Installer',
                dismiss: 'Fermer',
                online: 'En ligne',
                offline: 'Mode hors ligne',
                yourFavorites: 'Vos favoris',
                recommendedForYou: 'Recommandé pour vous',
                reservations: 'Réservations',
                reservationsDesc: 'Réservez votre table et profitez d\'une expérience unique',
                callNow: 'Appeler maintenant',
                sendEmail: 'Envoyer un email',
                quickLinks: 'Liens rapides',
                home: 'Accueil',
                menu: 'Menu',
                privacy: 'Confidentialité',
                privacyPolicy: 'Politique de Confidentialité',
                privacyIntro: 'Chez My Lounge Palmanova, nous respectons votre vie privée. Cette application collecte des données minimales pour améliorer votre expérience.',
                dataCollected: 'Données que nous collectons:',
                dataItem1: 'Préférences linguistiques (stockées localement)',
                dataItem2: 'Éléments favoris (stockés localement)',
                dataItem3: 'Statistiques d\'utilisation anonymes (optionnel)',
                dataUsage: 'Utilisation des données:',
                dataUsageDesc: 'Les données sont utilisées uniquement pour personnaliser votre expérience et améliorer nos services. Nous ne partageons pas d\'informations personnelles avec des tiers.',
                yourRights: 'Vos droits:',
                yourRightsDesc: 'Vous pouvez désactiver le suivi à tout moment en utilisant le lien dans le pied de page. Les données locales peuvent être supprimées en effaçant les données du navigateur.',
                disableAnalytics: 'Désactiver le suivi',
                enableAnalytics: 'Activer le suivi',
                analyticsEnabled: 'Analytics actif',
                analyticsDisabled: 'Analytics désactivé',
                priceRange: 'Prix:',
                allPrices: 'Tous',
                economico: 'Économique (≤15€)',
                medio: 'Moyen (16-30€)',
                premiumPrice: 'Premium (>30€)',
                badges: 'En vedette:',
                allBadges: 'Tous',
                clearFilters: 'Effacer les filtres',
                resultsFound: 'résultats trouvés'
            },
            de: {
                title: 'Gourmet-Menü',
                subtitle: 'Entdecken Sie unsere exquisite Auswahl einzigartiger Geschmäcker',
                search: 'Menü durchsuchen...',
                all: 'Alle',
                shisha: 'Premium Shisha',
                cocktails: 'Signature-Cocktails',
                food: 'Gourmet-Gastronomie',
                desserts: 'Premium-Desserts',
                drinks: 'Premium-Getränke',
                coffee: 'Kaffee & Tee',
                salads: 'Gourmet-Salate',
                pizzas: 'Handwerkliche Pizzen',
                noResults: 'Keine Ergebnisse',
                noResultsDesc: 'Wir konnten keine Produkte finden, die Ihrer Suche entsprechen',
                tryAlternatives: 'Versuchen Sie:',
                popular: 'Beliebt',
                new: 'Neu',
                premium: 'Premium',
                signature: 'Signature',
                exclusive: 'Exklusiv',
                contact: 'Kontakt',
                hours: 'Öffnungszeiten',
                weekdays: 'Mo - Do: 18:00 - 02:00',
                weekend: 'Fr - Sa: 18:00 - 03:00',
                sunday: 'So: 18:00 - 01:00',
                rights: 'Alle Rechte vorbehalten.',
                footerDesc: 'Premium-Erlebnis im Herzen von Palmanova',
                language: 'Sprache',
                installApp: 'App installieren',
                installDesc: 'Schnellerer Zugang zum Menü',
                install: 'Installieren',
                dismiss: 'Schließen',
                online: 'Online',
                offline: 'Offline-Modus',
                yourFavorites: 'Ihre Favoriten',
                recommendedForYou: 'Für Sie empfohlen',
                reservations: 'Reservierungen',
                reservationsDesc: 'Buchen Sie Ihren Tisch und genießen Sie ein einzigartiges Erlebnis',
                callNow: 'Jetzt anrufen',
                sendEmail: 'E-Mail senden',
                quickLinks: 'Schnellzugriff',
                home: 'Startseite',
                menu: 'Menü',
                privacy: 'Datenschutz',
                privacyPolicy: 'Datenschutzrichtlinie',
                privacyIntro: 'Bei My Lounge Palmanova respektieren wir Ihre Privatsphäre. Diese Anwendung sammelt minimale Daten, um Ihre Erfahrung zu verbessern.',
                dataCollected: 'Daten, die wir sammeln:',
                dataItem1: 'Spracheinstellungen (lokal gespeichert)',
                dataItem2: 'Lieblingselemente (lokal gespeichert)',
                dataItem3: 'Anonyme Nutzungsstatistiken (optional)',
                dataUsage: 'Datennutzung:',
                dataUsageDesc: 'Daten werden ausschließlich zur Personalisierung Ihrer Erfahrung und zur Verbesserung unserer Dienste verwendet. Wir teilen keine persönlichen Informationen mit Dritten.',
                yourRights: 'Ihre Rechte:',
                yourRightsDesc: 'Sie können die Verfolgung jederzeit über den Link in der Fußzeile deaktivieren. Lokale Daten können durch Löschen der Browserdaten entfernt werden.',
                disableAnalytics: 'Verfolgung deaktivieren',
                enableAnalytics: 'Verfolgung aktivieren',
                analyticsEnabled: 'Analytics aktiv',
                analyticsDisabled: 'Analytics deaktiviert',
                priceRange: 'Preis:',
                allPrices: 'Alle',
                economico: 'Budget (≤15€)',
                medio: 'Mittel (16-30€)',
                premiumPrice: 'Premium (>30€)',
                badges: 'Empfohlen:',
                allBadges: 'Alle',
                clearFilters: 'Filter löschen',
                resultsFound: 'Ergebnisse gefunden'
            },
            it: {
                title: 'Menu Premium',
                subtitle: 'Scopri la nostra squisita selezione di sapori unici',
                search: 'Cerca nel menu...',
                all: 'Tutto',
                shisha: 'Shisha Premium',
                cocktails: 'Cocktail Signature',
                food: 'Gastronomia Gourmet',
                desserts: 'Dolci Premium',
                drinks: 'Bevande Premium',
                coffee: 'Caffè & Infusi',
                salads: 'Insalate Gourmet',
                pizzas: 'Pizze Artigianali',
                noResults: 'Nessun risultato',
                noResultsDesc: 'Non abbiamo trovato prodotti che corrispondono alla tua ricerca',
                tryAlternatives: 'Prova:',
                popular: 'Popolare',
                new: 'Nuovo',
                premium: 'Premium',
                signature: 'Signature',
                exclusive: 'Esclusivo',
                contact: 'Contatto',
                hours: 'Orari',
                weekdays: 'Lun - Gio: 18:00 - 02:00',
                weekend: 'Ven - Sab: 18:00 - 03:00',
                sunday: 'Dom: 18:00 - 01:00',
                rights: 'Tutti i diritti riservati.',
                footerDesc: 'Esperienza premium nel cuore di Palmanova',
                language: 'Lingua',
                installApp: 'Installa App',
                installDesc: 'Accesso più veloce al menu',
                install: 'Installa',
                dismiss: 'Chiudi',
                online: 'Online',
                offline: 'Modalità offline',
                yourFavorites: 'I tuoi preferiti',
                recommendedForYou: 'Consigliato per te',
                reservations: 'Prenotazioni',
                reservationsDesc: 'Prenota il tuo tavolo e goditi un\'esperienza unica',
                callNow: 'Chiama ora',
                sendEmail: 'Invia email',
                quickLinks: 'Link rapidi',
                home: 'Home',
                menu: 'Menu',
                privacy: 'Privacy',
                privacyPolicy: 'Informativa sulla Privacy',
                privacyIntro: 'Al My Lounge Palmanova rispettiamo la tua privacy. Questa applicazione raccoglie dati minimi per migliorare la tua esperienza.',
                dataCollected: 'Dati che raccogliamo:',
                dataItem1: 'Preferenze linguistiche (memorizzate localmente)',
                dataItem2: 'Elementi preferiti (memorizzati localmente)',
                dataItem3: 'Statistiche di utilizzo anonime (opzionale)',
                dataUsage: 'Utilizzo dei dati:',
                dataUsageDesc: 'I dati vengono utilizzati esclusivamente per personalizzare la tua esperienza e migliorare i nostri servizi. Non condividiamo informazioni personali con terze parti.',
                yourRights: 'I tuoi diritti:',
                yourRightsDesc: 'Puoi disattivare il tracciamento in qualsiasi momento utilizzando il link nel footer. I dati locali possono essere eliminati cancellando i dati del browser.',
                disableAnalytics: 'Disattiva tracciamento',
                enableAnalytics: 'Attiva tracciamento',
                analyticsEnabled: 'Analytics attivo',
                analyticsDisabled: 'Analytics disattivato',
                priceRange: 'Prezzo:',
                allPrices: 'Tutti',
                economico: 'Economico (≤15€)',
                medio: 'Medio (16-30€)',
                premiumPrice: 'Premium (>30€)',
                badges: 'In evidenza:',
                allBadges: 'Tutti',
                clearFilters: 'Cancella filtri',
                resultsFound: 'risultati trovati'
            }
        };

        // Language flags
        const languageFlags = {
            es: '🇪🇸',
            en: '🇬🇧',
            fr: '🇫🇷',
            de: '🇩🇪',
            it: '🇮🇹'
        };

        // Menu Data
        const menuDataBase = {
            shisha: [
                {
                    id: 'shisha-1',
                    name: { es: 'Adalya Love 66 Supreme', en: 'Adalya Love 66 Supreme', fr: 'Adalya Love 66 Supreme', de: 'Adalya Love 66 Supreme', it: 'Adalya Love 66 Supreme' },
                    detail: { es: 'Frutas tropicales, menta glacial, vainilla', en: 'Tropical fruits, glacial mint, vanilla', fr: 'Fruits tropicaux, menthe glaciale, vanille', de: 'Tropische Früchte, Gletscherminze, Vanille', it: 'Frutti tropicali, menta glaciale, vaniglia' },
                    price: '38€',
                    priceValue: 38,
                    badges: ['popular'],
                    category: 'shisha'
                },
                {
                    id: 'shisha-2',
                    name: { es: 'Starbuzz Blue Mist Deluxe', en: 'Starbuzz Blue Mist Deluxe', fr: 'Starbuzz Blue Mist Deluxe', de: 'Starbuzz Blue Mist Deluxe', it: 'Starbuzz Blue Mist Deluxe' },
                    detail: { es: 'Arándano silvestre, menta ártica, eucalipto', en: 'Wild blueberry, arctic mint, eucalyptus', fr: 'Myrtille sauvage, menthe arctique, eucalyptus', de: 'Wilde Heidelbeere, arktische Minze, Eukalyptus', it: 'Mirtillo selvatico, menta artica, eucalipto' },
                    price: '42€',
                    priceValue: 42,
                    badges: ['new'],
                    category: 'shisha'
                },
                {
                    id: 'shisha-3',
                    name: { es: 'Al Fakher Double Apple Royal', en: 'Al Fakher Double Apple Royal', fr: 'Al Fakher Double Apple Royal', de: 'Al Fakher Double Apple Royal', it: 'Al Fakher Double Apple Royal' },
                    detail: { es: 'Doble manzana con especias orientales', en: 'Double apple with oriental spices', fr: 'Double pomme aux épices orientales', de: 'Doppelter Apfel mit orientalischen Gewürzen', it: 'Doppia mela con spezie orientali' },
                    price: '32€',
                    priceValue: 32,
                    badges: [],
                    category: 'shisha'
                },
                {
                    id: 'shisha-4',
                    name: { es: 'Frozen Fruit Paradise', en: 'Frozen Fruit Paradise', fr: 'Paradis des Fruits Glacés', de: 'Gefrorenes Fruchtparadies', it: 'Paradiso della Frutta Ghiacciata' },
                    detail: { es: 'Sandía, piña, mango, maracuyá con hielo seco', en: 'Watermelon, pineapple, mango, passion fruit with dry ice', fr: 'Pastèque, ananas, mangue, fruit de la passion avec glace sèche', de: 'Wassermelone, Ananas, Mango, Passionsfrucht mit Trockeneis', it: 'Anguria, ananas, mango, frutto della passione con ghiaccio secco' },
                    price: '48€',
                    priceValue: 48,
                    badges: ['premium'],
                    category: 'shisha'
                },
                {
                    id: 'shisha-5',
                    name: { es: 'Vodka Shisha Platinum', en: 'Vodka Shisha Platinum', fr: 'Vodka Shisha Platinum', de: 'Vodka Shisha Platinum', it: 'Vodka Shisha Platinum' },
                    detail: { es: 'Base Grey Goose, frutos rojos, pétalos de rosa', en: 'Grey Goose base, red berries, rose petals', fr: 'Base Grey Goose, fruits rouges, pétales de rose', de: 'Grey Goose Basis, rote Beeren, Rosenblätter', it: 'Base Grey Goose, frutti rossi, petali di rosa' },
                    price: '55€',
                    priceValue: 55,
                    badges: ['signature'],
                    category: 'shisha'
                },
                {
                    id: 'shisha-6',
                    name: { es: 'Golden Honey Deluxe', en: 'Golden Honey Deluxe', fr: 'Miel Doré Deluxe', de: 'Goldener Honig Deluxe', it: 'Miele Dorato Deluxe' },
                    detail: { es: 'Miel de acacia, canela Ceilán, almendra tostada', en: 'Acacia honey, Ceylon cinnamon, toasted almond', fr: 'Miel d\'acacia, cannelle de Ceylan, amande grillée', de: 'Akazienhonig, Ceylon-Zimt, geröstete Mandel', it: 'Miele di acacia, cannella di Ceylon, mandorla tostata' },
                    price: '40€',
                    priceValue: 40,
                    badges: ['exclusive'],
                    category: 'shisha'
                }
            ],
            cocktails: [
                {
                    id: 'cocktail-1',
                    name: { es: 'My Lounge Signature Platinum', en: 'My Lounge Signature Platinum', fr: 'My Lounge Signature Platinum', de: 'My Lounge Signature Platinum', it: 'My Lounge Signature Platinum' },
                    detail: { es: 'Vodka, lichi, lima kaffir, coco, yuzu', en: 'Vodka, lychee, kaffir lime, coconut, yuzu', fr: 'Vodka, litchi, lime kaffir, coco, yuzu', de: 'Wodka, Litschi, Kaffir-Limette, Kokosnuss, Yuzu', it: 'Vodka, litchi, lime kaffir, cocco, yuzu' },
                    price: '22€',
                    priceValue: 22,
                    badges: ['signature'],
                    category: 'cocktails'
                },
                {
                    id: 'cocktail-2',
                    name: { es: 'Neon Dreams Electric', en: 'Neon Dreams Electric', fr: 'Rêves Néon Électriques', de: 'Neon Dreams Electric', it: 'Sogni Neon Elettrici' },
                    detail: { es: 'Hendrick\'s, tónica premium, pepino, flores', en: 'Hendrick\'s, premium tonic, cucumber, flowers', fr: 'Hendrick\'s, tonic premium, concombre, fleurs', de: 'Hendrick\'s, Premium-Tonic, Gurke, Blüten', it: 'Hendrick\'s, tonica premium, cetriolo, fiori' },
                    price: '19€',
                    priceValue: 19,
                    badges: ['popular'],
                    category: 'cocktails'
                },
                {
                    id: 'cocktail-3',
                    name: { es: 'Palmanova Sunset', en: 'Palmanova Sunset', fr: 'Coucher de Soleil Palmanova', de: 'Palmanova Sonnenuntergang', it: 'Tramonto Palmanova' },
                    detail: { es: 'Tequila reposado, mango, chile piquín, sal negra', en: 'Reposado tequila, mango, piquín chili, black salt', fr: 'Tequila reposado, mangue, piment piquín, sel noir', de: 'Reposado-Tequila, Mango, Piquín-Chili, schwarzes Salz', it: 'Tequila reposado, mango, peperoncino piquín, sale nero' },
                    price: '20€',
                    priceValue: 20,
                    badges: [],
                    category: 'cocktails'
                },
                {
                    id: 'cocktail-4',
                    name: { es: 'Purple Rain Mystique', en: 'Purple Rain Mystique', fr: 'Mystique Pluie Violette', de: 'Purple Rain Mystique', it: 'Purple Rain Mystique' },
                    detail: { es: 'Vodka cristal, violeta, arándanos, oro comestible', en: 'Crystal vodka, violet, blueberries, edible gold', fr: 'Vodka cristal, violette, myrtilles, or comestible', de: 'Kristall-Wodka, Veilchen, Heidelbeeren, essbares Gold', it: 'Vodka cristallo, violetta, mirtilli, oro commestibile' },
                    price: '18€',
                    priceValue: 18,
                    badges: ['new'],
                    category: 'cocktails'
                },
                {
                    id: 'cocktail-5',
                    name: { es: 'Golden Margarita Royal', en: 'Golden Margarita Royal', fr: 'Margarita Royale Dorée', de: 'Goldene Margarita Royal', it: 'Margarita Reale Dorata' },
                    detail: { es: 'Añejo, Grand Marnier, lima orgánica, sal dorada', en: 'Añejo, Grand Marnier, organic lime, golden salt', fr: 'Añejo, Grand Marnier, lime bio, sel doré', de: 'Añejo, Grand Marnier, Bio-Limette, goldenes Salz', it: 'Añejo, Grand Marnier, lime biologico, sale dorato' },
                    price: '24€',
                    priceValue: 24,
                    badges: ['premium'],
                    category: 'cocktails'
                }
            ],
            food: [
                {
                    id: 'food-1',
                    name: { es: 'Tabla de Quesos Artesanales', en: 'Artisan Cheese Board', fr: 'Plateau de Fromages Artisanaux', de: 'Handwerkliche Käseplatte', it: 'Tagliere di Formaggi Artigianali' },
                    detail: { es: '5 quesos europeos, frutos secos, miel, higo', en: '5 European cheeses, nuts, honey, fig', fr: '5 fromages européens, fruits secs, miel, figue', de: '5 europäische Käse, Nüsse, Honig, Feige', it: '5 formaggi europei, frutta secca, miele, fico' },
                    price: '28€',
                    priceValue: 28,
                    badges: ['popular'],
                    category: 'food'
                },
                {
                    id: 'food-2',
                    name: { es: 'Nachos My Lounge Premium', en: 'My Lounge Premium Nachos', fr: 'Nachos Premium My Lounge', de: 'My Lounge Premium Nachos', it: 'Nachos Premium My Lounge' },
                    detail: { es: 'Guacamole fresco, queso fundido, jalapeños, crema', en: 'Fresh guacamole, melted cheese, jalapeños, cream', fr: 'Guacamole frais, fromage fondu, jalapeños, crème', de: 'Frische Guacamole, geschmolzener Käse, Jalapeños, Sahne', it: 'Guacamole fresco, formaggio fuso, jalapeños, panna' },
                    price: '19€',
                    priceValue: 19,
                    badges: [],
                    category: 'food'
                },
                {
                    id: 'food-3',
                    name: { es: 'Alitas BBQ Glazed', en: 'BBQ Glazed Wings', fr: 'Ailes BBQ Glacées', de: 'BBQ Glasierte Flügel', it: 'Ali BBQ Glassate' },
                    detail: { es: 'Marinadas 24 h con BBQ casera y miel', en: 'Marinated 24h with homemade BBQ and honey', fr: 'Marinées 24h avec BBQ maison et miel', de: '24h mariniert mit hausgemachter BBQ und Honig', it: 'Marinate 24h con BBQ casalingo e miele' },
                    price: '17€',
                    priceValue: 17,
                    badges: [],
                    category: 'food'
                },
                {
                    id: 'food-4',
                    name: { es: 'Ceviche del Día Premium', en: 'Premium Daily Ceviche', fr: 'Ceviche du Jour Premium', de: 'Premium Tages-Ceviche', it: 'Ceviche del Giorno Premium' },
                    detail: { es: 'Pescado del día, lima, cebolla morada, ají', en: 'Fish of the day, lime, red onion, chili', fr: 'Poisson du jour, lime, oignon rouge, piment', de: 'Tagesfisch, Limette, rote Zwiebel, Chili', it: 'Pesce del giorno, lime, cipolla rossa, peperoncino' },
                    price: '22€',
                    priceValue: 22,
                    badges: ['signature'],
                    category: 'food'
                },
                {
                    id: 'food-5',
                    name: { es: 'Hamburguesa Wagyu Deluxe', en: 'Wagyu Deluxe Burger', fr: 'Burger Wagyu Deluxe', de: 'Wagyu Deluxe Burger', it: 'Hamburger Wagyu Deluxe' },
                    detail: { es: 'Wagyu, brie, rúcula, tomate confitado, trufa', en: 'Wagyu, brie, arugula, confit tomato, truffle', fr: 'Wagyu, brie, roquette, tomate confite, truffe', de: 'Wagyu, Brie, Rucola, konfierte Tomate, Trüffel', it: 'Wagyu, brie, rucola, pomodoro confito, tartufo' },
                    price: '32€',
                    priceValue: 32,
                    badges: ['premium'],
                    category: 'food'
                }
            ],
            desserts: [
                {
                    id: 'dessert-1',
                    name: { es: 'Tiramisú Deconstructo', en: 'Deconstructed Tiramisu', fr: 'Tiramisu Déconstruit', de: 'Dekonstruiertes Tiramisu', it: 'Tiramisù Destrutturato' },
                    detail: { es: 'Café etíope, mascarpone, cacao belga', en: 'Ethiopian coffee, mascarpone, Belgian cocoa', fr: 'Café éthiopien, mascarpone, cacao belge', de: 'Äthiopischer Kaffee, Mascarpone, belgischer Kakao', it: 'Caffè etiope, mascarpone, cacao belga' },
                    price: '14€',
                    priceValue: 14,
                    badges: ['signature'],
                    category: 'desserts'
                },
                {
                    id: 'dessert-2',
                    name: { es: 'Cheesecake de Maracuyá', en: 'Passion Fruit Cheesecake', fr: 'Cheesecake au Fruit de la Passion', de: 'Passionsfrucht-Käsekuchen', it: 'Cheesecake al Frutto della Passione' },
                    detail: { es: 'Galleta graham, coulis fresco', en: 'Graham cracker, fresh coulis', fr: 'Biscuit graham, coulis frais', de: 'Graham-Keks, frisches Coulis', it: 'Biscotto graham, coulis fresco' },
                    price: '12€',
                    priceValue: 12,
                    badges: ['popular'],
                    category: 'desserts'
                },
                {
                    id: 'dessert-3',
                    name: { es: 'Brownie de Chocolate Belga', en: 'Belgian Chocolate Brownie', fr: 'Brownie au Chocolat Belge', de: 'Belgischer Schokoladen-Brownie', it: 'Brownie al Cioccolato Belga' },
                    detail: { es: 'Valrhona, vainilla, caramelo', en: 'Valrhona, vanilla, caramel', fr: 'Valrhona, vanille, caramel', de: 'Valrhona, Vanille, Karamell', it: 'Valrhona, vaniglia, caramello' },
                    price: '13€',
                    priceValue: 13,
                    badges: [],
                    category: 'desserts'
                },
                {
                    id: 'dessert-4',
                    name: { es: 'Crème Brûlée de Lavanda', en: 'Lavender Crème Brûlée', fr: 'Crème Brûlée à la Lavande', de: 'Lavendel Crème Brûlée', it: 'Crème Brûlée alla Lavanda' },
                    detail: { es: 'Lavanda provenzal, azúcar caramelizado', en: 'Provençal lavender, caramelized sugar', fr: 'Lavande provençale, sucre caramélisé', de: 'Provenzalischer Lavendel, karamellisierter Zucker', it: 'Lavanda provenzale, zucchero caramellato' },
                    price: '15€',
                    priceValue: 15,
                    badges: ['premium'],
                    category: 'desserts'
                }
            ],
            drinks: [
                {
                    id: 'drink-1',
                    name: { es: 'Whisky Collection Aged', en: 'Whisky Collection Aged', fr: 'Collection Whisky Vieilli', de: 'Whisky Collection Aged', it: 'Collezione Whisky Invecchiato' },
                    detail: { es: 'Selección 18 años, notas ahumadas/especiadas', en: '18-year selection, smoky/spiced notes', fr: 'Sélection 18 ans, notes fumées/épicées', de: '18-Jahre-Auswahl, rauchige/würzige Noten', it: 'Selezione 18 anni, note affumicate/speziate' },
                    price: '35€',
                    priceValue: 35,
                    badges: ['premium'],
                    category: 'drinks'
                },
                {
                    id: 'drink-2',
                    name: { es: 'Champagne Dom Pérignon', en: 'Dom Pérignon Champagne', fr: 'Champagne Dom Pérignon', de: 'Dom Pérignon Champagner', it: 'Champagne Dom Pérignon' },
                    detail: { es: 'Vintage, burbuja fina y final largo', en: 'Vintage, fine bubbles and long finish', fr: 'Millésime, bulles fines et finale longue', de: 'Jahrgang, feine Bläschen und langer Abgang', it: 'Annata, bollicine fini e finale lungo' },
                    price: '180€',
                    priceValue: 180,
                    badges: ['exclusive'],
                    category: 'drinks'
                },
                {
                    id: 'drink-3',
                    name: { es: 'Gin Tonic Botanical', en: 'Botanical Gin Tonic', fr: 'Gin Tonic Botanique', de: 'Botanischer Gin Tonic', it: 'Gin Tonic Botanico' },
                    detail: { es: 'Botánicos mediterráneos, tónica premium', en: 'Mediterranean botanicals, premium tonic', fr: 'Botaniques méditerranéens, tonic premium', de: 'Mediterrane Botanicals, Premium-Tonic', it: 'Botanici mediterranei, tonica premium' },
                    price: '16€',
                    priceValue: 16,
                    badges: ['popular'],
                    category: 'drinks'
                },
                {
                    id: 'drink-4',
                    name: { es: 'Mojito Royal Cuban', en: 'Royal Cuban Mojito', fr: 'Mojito Royal Cubain', de: 'Royal Cuban Mojito', it: 'Mojito Royal Cubano' },
                    detail: { es: 'Ron añejo, menta de huerto, lima, caña', en: 'Aged rum, garden mint, lime, cane', fr: 'Rhum vieux, menthe du jardin, lime, canne', de: 'Gereifter Rum, Garten-Minze, Limette, Zuckerrohr', it: 'Rum invecchiato, menta dell\'orto, lime, canna' },
                    price: '14€',
                    priceValue: 14,
                    badges: [],
                    category: 'drinks'
                },
                {
                    id: 'drink-5',
                    name: { es: 'Sangría Premium Reserva', en: 'Premium Reserve Sangria', fr: 'Sangria Premium Réserve', de: 'Premium Reserve Sangria', it: 'Sangria Premium Riserva' },
                    detail: { es: 'Vino reserva, frutas, brandy, especias', en: 'Reserve wine, fruits, brandy, spices', fr: 'Vin de réserve, fruits, brandy, épices', de: 'Reserve-Wein, Früchte, Brandy, Gewürze', it: 'Vino riserva, frutta, brandy, spezie' },
                    price: '25€',
                    priceValue: 25,
                    badges: ['signature'],
                    category: 'drinks'
                },
                {
                    id: 'drink-6',
                    name: { es: 'Aperol Spritz Deluxe', en: 'Aperol Spritz Deluxe', fr: 'Aperol Spritz Deluxe', de: 'Aperol Spritz Deluxe', it: 'Aperol Spritz Deluxe' },
                    detail: { es: 'Aperol, prosecco premium, naranja siciliana', en: 'Aperol, premium prosecco, Sicilian orange', fr: 'Aperol, prosecco premium, orange sicilienne', de: 'Aperol, Premium-Prosecco, sizilianische Orange', it: 'Aperol, prosecco premium, arancia siciliana' },
                    price: '12€',
                    priceValue: 12,
                    badges: ['new'],
                    category: 'drinks'
                }
            ],
            coffee: [
                {
                    id: 'coffee-1',
                    name: { es: 'Café Arábica Premium', en: 'Premium Arabica Coffee', fr: 'Café Arabica Premium', de: 'Premium Arabica Kaffee', it: 'Caffè Arabica Premium' },
                    detail: { es: 'Colombia/Etiopía, tueste medio artesanal', en: 'Colombia/Ethiopia, artisan medium roast', fr: 'Colombie/Éthiopie, torréfaction moyenne artisanale', de: 'Kolumbien/Äthiopien, handwerkliche mittlere Röstung', it: 'Colombia/Etiopia, tostatura media artigianale' },
                    price: '8€',
                    priceValue: 8,
                    badges: ['popular'],
                    category: 'coffee'
                },
                {
                    id: 'coffee-2',
                    name: { es: 'Té Chai Masala Especial', en: 'Special Chai Masala Tea', fr: 'Thé Chai Masala Spécial', de: 'Spezieller Chai Masala Tee', it: 'Tè Chai Masala Speciale' },
                    detail: { es: 'Cardamomo, canela, jengibre, clavo, leche', en: 'Cardamom, cinnamon, ginger, clove, milk', fr: 'Cardamome, cannelle, gingembre, clou de girofle, lait', de: 'Kardamom, Zimt, Ingwer, Nelke, Milch', it: 'Cardamomo, cannella, zenzero, chiodi di garofano, latte' },
                    price: '9€',
                    priceValue: 9,
                    badges: [],
                    category: 'coffee'
                },
                {
                    id: 'coffee-3',
                    name: { es: 'Matcha Latte Ceremonial', en: 'Ceremonial Matcha Latte', fr: 'Matcha Latte Cérémonial', de: 'Zeremonieller Matcha Latte', it: 'Matcha Latte Cerimoniale' },
                    detail: { es: 'Matcha japonés, avena orgánica, miel', en: 'Japanese matcha, organic oat, honey', fr: 'Matcha japonais, avoine bio, miel', de: 'Japanischer Matcha, Bio-Hafer, Honig', it: 'Matcha giapponese, avena biologica, miele' },
                    price: '11€',
                    priceValue: 11,
                    badges: ['premium'],
                    category: 'coffee'
                },
                {
                    id: 'coffee-4',
                    name: { es: 'Infusión Detox Garden', en: 'Detox Garden Infusion', fr: 'Infusion Détox Garden', de: 'Detox Garden Aufguss', it: 'Infuso Detox Garden' },
                    detail: { es: 'Menta, hierba luisa, manzanilla, jengibre', en: 'Mint, lemon verbena, chamomile, ginger', fr: 'Menthe, verveine citronnée, camomille, gingembre', de: 'Minze, Zitronenverbene, Kamille, Ingwer', it: 'Menta, verbena limone, camomilla, zenzero' },
                    price: '7€',
                    priceValue: 7,
                    badges: [],
                    category: 'coffee'
                },
                {
                    id: 'coffee-5',
                    name: { es: 'Chocolate Caliente Belga', en: 'Belgian Hot Chocolate', fr: 'Chocolat Chaud Belge', de: 'Belgische Heiße Schokolade', it: 'Cioccolata Calda Belga' },
                    detail: { es: 'Valrhona 70%, nata, virutas', en: 'Valrhona 70%, cream, shavings', fr: 'Valrhona 70%, crème, copeaux', de: 'Valrhona 70%, Sahne, Späne', it: 'Valrhona 70%, panna, scaglie' },
                    price: '10€',
                    priceValue: 10,
                    badges: ['signature'],
                    category: 'coffee'
                }
            ],
            salads: [
                {
                    id: 'salad-1',
                    name: { es: 'Caesar Salad Premium', en: 'Premium Caesar Salad', fr: 'Salade César Premium', de: 'Premium Caesar Salat', it: 'Caesar Salad Premium' },
                    detail: { es: 'Romana, parmesano 24 m, crutones, anchoas', en: 'Romaine, 24-month parmesan, croutons, anchovies', fr: 'Romaine, parmesan 24 m, croûtons, anchois', de: 'Römersalat, 24 Monate Parmesan, Croutons, Sardellen', it: 'Romana, parmigiano 24 m, crostini, acciughe' },
                    price: '18€',
                    priceValue: 18,
                    badges: ['popular'],
                    category: 'salads'
                },
                {
                    id: 'salad-2',
                    name: { es: 'Quinoa Buddha Bowl', en: 'Quinoa Buddha Bowl', fr: 'Buddha Bowl Quinoa', de: 'Quinoa Buddha Bowl', it: 'Quinoa Buddha Bowl' },
                    detail: { es: 'Quinoa tricolor, aguacate, edamame, tahini', en: 'Tricolor quinoa, avocado, edamame, tahini', fr: 'Quinoa tricolore, avocat, edamame, tahini', de: 'Dreifarbige Quinoa, Avocado, Edamame, Tahini', it: 'Quinoa tricolore, avocado, edamame, tahini' },
                    price: '16€',
                    priceValue: 16,
                    badges: ['new'],
                    category: 'salads'
                },
                {
                    id: 'salad-3',
                    name: { es: 'Burrata Mediterránea', en: 'Mediterranean Burrata', fr: 'Burrata Méditerranéenne', de: 'Mediterrane Burrata', it: 'Burrata Mediterranea' },
                    detail: { es: 'Burrata, cherry confitado, albahaca, balsámico', en: 'Burrata, confit cherry, basil, balsamic', fr: 'Burrata, tomate cerise confite, basilic, balsamique', de: 'Burrata, konfierte Kirschtomate, Basilikum, Balsamico', it: 'Burrata, cherry confitato, basilico, balsamico' },
                    price: '20€',
                    priceValue: 20,
                    badges: ['premium'],
                    category: 'salads'
                },
                {
                    id: 'salad-4',
                    name: { es: 'Salmón Tataki Salad', en: 'Salmon Tataki Salad', fr: 'Salade Tataki de Saumon', de: 'Lachs Tataki Salat', it: 'Insalata Tataki di Salmone' },
                    detail: { es: 'Tataki, wakame, pepino, yuzu', en: 'Tataki, wakame, cucumber, yuzu', fr: 'Tataki, wakame, concombre, yuzu', de: 'Tataki, Wakame, Gurke, Yuzu', it: 'Tataki, wakame, cetriolo, yuzu' },
                    price: '24€',
                    priceValue: 24,
                    badges: ['signature'],
                    category: 'salads'
                }
            ],
            pizzas: [
                {
                    id: 'pizza-1',
                    name: { es: 'Margherita Deluxe', en: 'Margherita Deluxe', fr: 'Margherita Deluxe', de: 'Margherita Deluxe', it: 'Margherita Deluxe' },
                    detail: { es: 'Masa madre 48 h, San Marzano, bufala, albahaca', en: '48h sourdough, San Marzano, buffalo, basil', fr: 'Levain 48h, San Marzano, bufflonne, basilic', de: '48h Sauerteig, San Marzano, Büffel, Basilikum', it: 'Lievito madre 48h, San Marzano, bufala, basilico' },
                    price: '15€',
                    priceValue: 15,
                    badges: ['popular'],
                    category: 'pizzas'
                },
                {
                    id: 'pizza-2',
                    name: { es: 'Trufa Negra Premium', en: 'Premium Black Truffle', fr: 'Truffe Noire Premium', de: 'Premium Schwarze Trüffel', it: 'Tartufo Nero Premium' },
                    detail: { es: 'Base blanca, trufa negra, shiitake, parmesano', en: 'White base, black truffle, shiitake, parmesan', fr: 'Base blanche, truffe noire, shiitake, parmesan', de: 'Weiße Basis, schwarze Trüffel, Shiitake, Parmesan', it: 'Base bianca, tartufo nero, shiitake, parmigiano' },
                    price: '28€',
                    priceValue: 28,
                    badges: ['exclusive'],
                    category: 'pizzas'
                },
                {
                    id: 'pizza-3',
                    name: { es: 'Prosciutto San Daniele', en: 'Prosciutto San Daniele', fr: 'Prosciutto San Daniele', de: 'Prosciutto San Daniele', it: 'Prosciutto San Daniele' },
                    detail: { es: '18 m, rúcula, cherry, burrata', en: '18 months, arugula, cherry, burrata', fr: '18 mois, roquette, cerise, burrata', de: '18 Monate, Rucola, Kirsche, Burrata', it: '18 mesi, rucola, cherry, burrata' },
                    price: '22€',
                    priceValue: 22,
                    badges: ['premium'],
                    category: 'pizzas'
                },
                {
                    id: 'pizza-4',
                    name: { es: 'Vegana Mediterránea', en: 'Mediterranean Vegan', fr: 'Végane Méditerranéenne', de: 'Mediterrane Vegane', it: 'Vegana Mediterranea' },
                    detail: { es: 'Verduras asadas, queso vegano, pesto, piñones', en: 'Roasted vegetables, vegan cheese, pesto, pine nuts', fr: 'Légumes grillés, fromage végane, pesto, pignons', de: 'Geröstetes Gemüse, veganer Käse, Pesto, Pinienkerne', it: 'Verdure arrostite, formaggio vegano, pesto, pinoli' },
                    price: '18€',
                    priceValue: 18,
                    badges: ['new'],
                    category: 'pizzas'
                }
            ]
        };

        // Utility Functions
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        function escapeRegExp(string) {
            return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
        }

        function getSearchScore(item, term) {
            if (!term) return 1;
            
            const name = item.name[currentLanguage].toLowerCase();
            const detail = item.detail[currentLanguage].toLowerCase();
            const searchTerm = term.toLowerCase();
            
            let score = 0;
            
            // Name exact match
            if (name === searchTerm) score += 100;
            // Name starts with term
            else if (name.startsWith(searchTerm)) score += 50;
            // Name contains term
            else if (name.includes(searchTerm)) score += 25;
            
            // Detail contains term
            if (detail.includes(searchTerm)) score += 10;
            
            // Badge matches
            item.badges.forEach(badge => {
                if (translations[currentLanguage][badge] && 
                    translations[currentLanguage][badge].toLowerCase().includes(searchTerm)) {
                    score += 5;
                }
            });
            
            // Popular and signature bonus
            if (item.badges.includes('popular') || item.badges.includes('signature')) {
                score += 2;
            }
            
            return score;
        }

        function highlightText(text, term) {
            if (!term) return text;
            const escapedTerm = escapeRegExp(term);
            const regex = new RegExp(`(${escapedTerm})`, 'gi');
            return text.replace(regex, '<span class="highlight">$1</span>');
        }

        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            const bgColor = type === 'success' ? 'bg-green-50 border-green-200' : 
                           type === 'error' ? 'bg-red-50 border-red-200' : 
                           'bg-blue-50 border-blue-200';
            const textColor = type === 'success' ? 'text-green-800' : 
                             type === 'error' ? 'text-red-800' : 
                             'text-blue-800';
            
            toast.className = `${bgColor} border rounded-2xl shadow-lg p-4 toast`;
            toast.innerHTML = `
                <div class="flex items-center justify-between">
                    <p class="text-sm font-medium ${textColor}">${message}</p>
                    <button class="ml-4 text-gray-400 hover:text-gray-600 focus-visible" onclick="this.parentElement.parentElement.remove()" aria-label="Cerrar notificación">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            `;
            
            document.getElementById('toastContainer').appendChild(toast);
            
            setTimeout(() => {
                if (toast.parentElement) {
                    toast.remove();
                }
            }, 5000);
        }

        // Favorites Manager
        const favoritesManager = {
            toggle(itemId) {
                const index = favorites.indexOf(itemId);
                if (index > -1) {
                    favorites.splice(index, 1);
                } else {
                    favorites.push(itemId);
                    this.createHeartParticles();
                }
                localStorage.setItem('myloungepalma_favorites', JSON.stringify(favorites));
                this.updateFavoriteButtons();
                this.updateFavoritesSection();
                
                // Track analytics
                if (analyticsEnabled) {
                    trackEvent('favorite_toggle', {
                        itemId,
                        isFavorite: this.isFavorite(itemId),
                        category: this.getItemById(itemId)?.category
                    });
                }
            },
            
            isFavorite(itemId) {
                return favorites.includes(itemId);
            },
            
            getItemById(itemId) {
                for (const category of Object.values(menuDataBase)) {
                    const item = category.find(item => item.id === itemId);
                    if (item) return item;
                }
                return null;
            },
            
            updateFavoriteButtons() {
                document.querySelectorAll('.favorite-btn').forEach(btn => {
                    const itemId = btn.dataset.itemId;
                    const isFav = this.isFavorite(itemId);
                    btn.innerHTML = isFav ? '❤️' : '🤍';
                    btn.setAttribute('aria-label', isFav ? 'Quitar de favoritos' : 'Añadir a favoritos');
                });
            },
            
            updateFavoritesSection() {
                const favoritesSection = document.getElementById('favoritesSection');
                const favoritesGrid = document.getElementById('favoritesGrid');
                
                if (favorites.length === 0) {
                    favoritesSection.classList.add('hidden');
                    return;
                }
                
                const favoriteItems = favorites.map(id => this.getItemById(id)).filter(Boolean);
                favoritesGrid.innerHTML = favoriteItems.map(item => this.renderItem(item)).join('');
                favoritesSection.classList.remove('hidden');
                this.updateFavoriteButtons();
            },
            
            renderItem(item) {
                return `
                    <div class="rounded-2xl bg-white shadow ring-1 ring-black/5 p-5 md:p-6 transition card-hover">
                        <div class="flex justify-between items-start mb-4">
                            <h3 class="font-playfair text-xl font-semibold text-black line-clamp-2">
                                ${item.name[currentLanguage]}
                            </h3>
                            <button class="favorite-btn text-2xl hover:scale-110 transition-transform focus-visible" 
                                    data-item-id="${item.id}"
                                    aria-label="Quitar de favoritos">
                                ❤️
                            </button>
                        </div>
                        
                        <p class="text-gray-600 mb-4 leading-relaxed line-clamp-2">
                            ${item.detail[currentLanguage]}
                        </p>
                        
                        <div class="flex items-center justify-between">
                            <div class="flex flex-wrap gap-2">
                                ${item.badges.map(badge => `
                                    <span class="badge-${badge} text-xs px-2 py-1 rounded-full font-medium">
                                        ${translations[currentLanguage][badge]}
                                    </span>
                                `).join('')}
                            </div>
                            <span class="text-gold font-bold text-xl font-playfair">${item.price}</span>
                        </div>
                    </div>
                `;
            },
            
            createHeartParticles() {
                for (let i = 0; i < 5; i++) {
                    const particle = document.createElement('div');
                    particle.innerHTML = '❤️';
                    particle.className = 'fixed text-2xl pointer-events-none animate-heartParticle z-50';
                    particle.style.left = Math.random() * window.innerWidth + 'px';
                    particle.style.top = Math.random() * window.innerHeight + 'px';
                    document.body.appendChild(particle);
                    
                    setTimeout(() => particle.remove(), 800);
                }
            }
        };

        // Recommendations Engine
        const recommendationsEngine = {
            getRecommendations() {
                if (favorites.length === 0) return [];
                
                const favoriteItems = favorites.map(id => favoritesManager.getItemById(id)).filter(Boolean);
                const categoryPreferences = {};
                const badgePreferences = {};
                let totalPrice = 0;
                
                // Analyze preferences
                favoriteItems.forEach(item => {
                    categoryPreferences[item.category] = (categoryPreferences[item.category] || 0) + 1;
                    totalPrice += item.priceValue;
                    item.badges.forEach(badge => {
                        badgePreferences[badge] = (badgePreferences[badge] || 0) + 1;
                    });
                });
                
                const avgPrice = totalPrice / favoriteItems.length;
                const preferredCategory = Object.keys(categoryPreferences).reduce((a, b) => 
                    categoryPreferences[a] > categoryPreferences[b] ? a : b
                );
                
                // Get all items except favorites
                const allItems = [];
                Object.values(menuDataBase).forEach(categoryItems => {
                    allItems.push(...categoryItems.filter(item => !favorites.includes(item.id)));
                });
                
                // Score items
                const scoredItems = allItems.map(item => {
                    let score = 0;
                    
                    // Category preference
                    if (item.category === preferredCategory) score += 10;
                    
                    // Badge preferences
                    item.badges.forEach(badge => {
                        if (badgePreferences[badge]) score += badgePreferences[badge] * 5;
                    });
                    
                    // Price proximity
                    const priceDiff = Math.abs(item.priceValue - avgPrice);
                    if (priceDiff <= 5) score += 8;
                    else if (priceDiff <= 10) score += 4;
                    else if (priceDiff <= 15) score += 2;
                    
                    return { item, score };
                });
                
                // Sort by score and return top 6
                return scoredItems
                    .sort((a, b) => b.score - a.score)
                    .slice(0, 6)
                    .map(({ item }) => item);
            },
            
            updateRecommendationsSection() {
                const recommendationsSection = document.getElementById('recommendationsSection');
                const recommendationsGrid = document.getElementById('recommendationsGrid');
                
                const recommendations = this.getRecommendations();
                
                if (recommendations.length === 0) {
                    recommendationsSection.classList.add('hidden');
                    return;
                }
                
                recommendationsGrid.innerHTML = recommendations.map(item => favoritesManager.renderItem(item)).join('');
                recommendationsSection.classList.remove('hidden');
                favoritesManager.updateFavoriteButtons();
            }
        };

        // Analytics
        function trackEvent(event, data = {}) {
            if (!analyticsEnabled) return;
            
            const eventData = {
                event,
                data,
                timestamp: new Date().toISOString(),
                language: currentLanguage,
                sessionId,
                userAgent: navigator.userAgent.substring(0, 100) // Truncated for privacy
            };
            
            analyticsEvents.push(eventData);
            
            // Send events if online and we have accumulated enough
            if (navigator.onLine && analyticsEvents.length >= 5) {
                sendAnalytics();
            }
        }

        function sendAnalytics() {
            if (analyticsEvents.length === 0) return;
            
            // In a real implementation, this would send to your analytics endpoint
            console.log('Analytics events:', analyticsEvents);
            
            // Clear sent events
            analyticsEvents = [];
        }

        function toggleAnalytics() {
            analyticsEnabled = !analyticsEnabled;
            localStorage.setItem('myloungepalma_analytics', analyticsEnabled ? 'enabled' : 'disabled');
            
            const optOutBtn = document.getElementById('analyticsOptOut');
            const statusSpan = document.getElementById('analyticsStatus');
            
            if (analyticsEnabled) {
                optOutBtn.textContent = translations[currentLanguage].disableAnalytics;
                statusSpan.textContent = translations[currentLanguage].analyticsEnabled;
                statusSpan.className = 'text-green-400';
            } else {
                optOutBtn.textContent = translations[currentLanguage].enableAnalytics;
                statusSpan.textContent = translations[currentLanguage].analyticsDisabled;
                statusSpan.className = 'text-red-400';
                analyticsEvents = []; // Clear pending events
            }
            
            showToast(analyticsEnabled ? 'Analytics activado' : 'Analytics desactivado', 'info');
        }

        // Performance Optimizer
        const performanceOptimizer = {
            init() {
                // Intersection Observer for animations
                intersectionObserver = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('animate-slideInUp');
                            intersectionObserver.unobserve(entry.target);
                        }
                    });
                }, { threshold: 0.1 });
            },
            
            observeElements() {
                document.querySelectorAll('.card-hover').forEach(card => {
                    intersectionObserver.observe(card);
                });
            }
        };

        // Gesture Handler
        const gestureHandler = {
            init() {
                const swipeContainer = document.querySelector<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'975bcc12c76402d4',t:'MTc1NjMwMDEwMS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>
